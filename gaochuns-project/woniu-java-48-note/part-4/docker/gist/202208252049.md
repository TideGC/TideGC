## host 网络

#docker-network #host 

> [!info] 提示
> 这种模式下，容器相当于是宿主机中的一个进程，而「不是一个独立的机器」。

在 host 模式中，虚拟机<small>（即，容器）</small> 没有自己的 IP ，它用到的是宿主机的 IP<small>（和端口）</small>，这种情况下，各个虚拟机<small>（即，容器）</small>谁是谁，主要靠它占用的是宿主机的哪个端口来分辨。

host 网络的特点在于，容器中所运行的程序必然会占用宿主机的对应端口。即，

- mysql 容器必然占用宿主机的 3306 端口；
- redis 容器必然占用宿主机的 6379 端口；
- ngxin 容器必然占用 80 端口；
- … 。

所以，host 网络模式创建并运行的容器，不需要 "-p" 来做端口映射。例如：

```sh
docker run -d --rm \
  --name mysql-3306 \
  -e MYSQL_ROOT_PASSWORD=123456 \
  --net host \
  mysql:8.0.26
```


你可以通过 [[202211021334#查看容器的 IP 地址|docker container inspect]] 命令来查看 mysql-3306 的 IP 地址，你会发现它没有自己的 IP 。

host 网络最大的有点就是理论上速度快<small>（因为，没有网桥分发数据这个环节）</small>，它的性能要好于 bridge 类型的网络。但是付出的代价是：因为无法指定端口映射，因此在同一个宿主机上只能其一个特定类型的服务。

例如，在 host 模式下，你无法启动 2 个 mysql 容器。因为它俩都需要宿主机的 3306 端口。但宿主机 3306 端口只有一个，因此，只有第一个 mysql 容器能启动成功。



