
---
alias: 
- 'docker run 命令'
tags: 
- docker 
- docker-run 
---

## docker run 命令

_docker run_ 命令同时兼具 2 个功能：

- 创建容器，
- 并启动、运行它。

例如：

```bash
docker run -d -p 80:80 --name test nginx
```

上述示例有 2 个注意事项：

1. _docker run_ 命令的整体规则是：docker run … --name <容器名> <镜像名>
2. 这里的 nginx 镜像等价于 library/nginx:latest，它省略了 namespace 和 tag 。


选项说明：

-tx-
| 选项 | 说明 |
| :- | :- |
| -d | 表示容器启动后在后台运行 |
| -p 80:80 | 表示将主机的 80 端口和容器的 80 端口『对接』。|\
|          | 即，宿主机从 80 端口收到的数据，由系统送到 docker 的 80 端口。|
| --name test | 表示所创建的容器的名字为 test 。|
| nginx | 表示以 `nginx` 镜像为基础创建容器。|

再次强调 2 点：

- _docker run_ 命令包含了 2 个动作：创建容器 and 启动容器。
- 镜像和容器是一对多的关系：同一个镜像可以用来制作多个容器。

Docker 容器有以下 2 种运行态：

### 前台交互式

容器运行在前台，容器运行时直接连接到容器中运行的程序上。<small>你可以去掉 **-d** 选项再看看容器执行效果。</small>

### 后台守护式

容器运行在后台，运行的过程中不会占用当前输入指定的终端，也不会连接到容器内的程序上。

这种运行后台容器必须通过指令来关闭<small>（_docker stop_）</small>。

---

### --rm 选项

_docker run_ 是创建并运行容器，它有一个 _--rm_ 选项可以使用。

_--rm_ 表示当容器遇到以下情况时，就自动删除：

- _docker run_ 命令未能成功启动<small>（通常是 _docker run_ 命令有无，缺参数）</small>；
- 成功启动了，后来通过 _docker stop_ 命令停止了。

简而言之一句话：“你容器现在没在运行，就把你删咯”。

