---
alias: 
  - 关于 Hystrix 和它的替代品
tags: 
  - spring-cloud
  - hystrix 
---

## 关于 Hystrix 和它的替代品

Hystrix 是 Netflix 公司推出的一款针对分布式系统延迟和容错的开源库，其设计目的是通过添加延迟容忍和容错逻辑，从而控制分布式服务之间的交互。

Hystrix 封装了微服务调用过程中的每一个依赖，使每个依赖彼此隔离，当延迟情况发生时，它会被限制在资源中，并包含回退<small>（fallback）</small>逻辑，该逻辑决定在依赖发生任何类型故障时应做出何种响应。

Hystrix 的目标是阻止级联故障，对通过第三方客户端访问的依赖的延迟和故障进行保护和访问。Hystrix 实现这一目标的大致思路如下：

1. 将外部依赖的访问请求封装在独立的线程中，进行资源隔离。

2. 对于超出设定阈值的服务调用，直接进行超时处理，不允许其消耗过长时间而导致线程阻塞。

3. 每个依赖服务维护一个独立的线程池，一旦线程池满了，直接拒绝服务调用。

4. 统计依赖服务调用的成功次数、失败次数、拒绝次数、超时次数等结果。

5. 在一段时间内，如果服务调用的异常次数超过一定的阈值，就会触发熔断器，停止对特定服务的所有请求。在一定时间内对服务降级，一段时间之后自动尝试恢复。

6. 如果某个服务出现调用失败、被拒绝、超时等异常情况，就会自动调用 fallback 降级机制。

> [!cite] 提示
> Hystrix 是使用在服务调用者，即，HTTP 请求发起方。

---

由于 Hystrix 官方已经停止开发了，所以 Spring Cloud 社区又推出了一款新的熔断器：Resilience4j 。Hystrix 官方也是推荐使用 Resilience4j 来代替自己。但是截止到目前为止，Resilience4j 并没有表现出要全面替代 Hystrix 的态势，市场占有率始终上升缓慢。

除了国外的 Resilience4j ，国内的 Alibaba 也开源了它的熔断器 Sentinel 并在其中加入了限流的功能，在国内使用广泛。

