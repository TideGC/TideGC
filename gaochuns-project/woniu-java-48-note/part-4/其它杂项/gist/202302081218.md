---
alias: 
  - 'UUID 及其缺陷'
---

## UUID 及其缺陷

### UUID

UUID<small>（Universally Unique Identifier，通用唯一识别码）</small>是按照开放软件基金会<small>（OSF）</small>制定的标准计算，用到了以太网卡地址、纳秒级时间、芯片 ID 码和许多可能的数字。

UUID 是由一组 32 位数的 16 进制数字所构成，是故 UUID 理论上的总数为 16<sup>32</sup>=2<sup>128</sup>，约等于 3.4 x 10<sup>123</sup>。

也就是说若每纳秒产生 1 百万个 UUID，要花 100 亿年才会将所有 UUID 用完。

UUID 通常以连字号分隔的五组来显示，形式为 `8-4-4-4-12`，总共有 36 个字符（即 32 个英数字母和 4 个连字号）。例如： `123e4567-e89b-12d3-a456-426655440000` 。

JDK 从 1.5 开始在 java.util 包下提供了一个 **UUID** 类用来生成 UUID： 

```java
UUID uuid = UUID.randomUUID();
String uuidStr1 = uuid.toString();
String uuidStr2 = uuidStr1.replaceAll("-","");
```

### UUID 的缺点

为了得到一个全局唯一 ID，很自然地就会想到 UUID 算法。但是，UUID 算法有明显的缺点：

1. UUID 太长了。16 个字节（128 位），通常以 36 长度的字符串表示，很多场景不适用。

2. 非纯数字。UUID 中会出现 ABCDEF 这些十六进制的字母，因此，在数据库和代码中，自然就不能存储在整型字段或变量中。因此，在数据库中以它作为主键，建立索引的代价比较大，性能有影响。

3. 不安全。UUID 中会包含网卡的 MAC 地址。

### 『好』ID 的标准 

从 UUID 的缺点我们也能推导出一个“好” ID 的标准应该有哪些：

1. 最好是由纯数字组成。

2. 越短越好，最好能存进整型变量和数据库的整型字段中。

3. 信息安全。另外，“ID 连续”并非好事情。

4. 在不连续的情况下，最好是递增的。即便不是严格递增，至少也应该是趋势递增。
