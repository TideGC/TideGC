## UML 类图

在团队协作过程中最常见的就是开会、开会最常用的就是图，而图中最常见的就是流程图、时序图、类图，这三个图可以清楚的描述你想解释的内容。学好类图不仅仅能帮助自己更清楚的梳理业务，还能提高开会效率。但是话说回来，你是否真的看懂别人画的图了？或者你真的会画吗？今天就和大家一起学习一下怎么画类图。

![uml-01.jpg](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/uml-01.jpg)

上图是我模拟出来的一个场景和大家具体说一下类图究竟应该怎么画才对。图中讲的是这样一个「故事」：

- 一个公司下面有很多部门，公司和部门是不可分割的。

- 码农属于一个部门，但是如果部门解散了，码农依然是码农。

- 码农无时无刻在用手机，只有工作时间才会使用 Mac 。

- Mac 是一种电脑，电脑是「可计算处理器」的一种实现。

下面我们就逐一介绍下这些关系。

### 1. 泛化关系（generalization）

泛化关系为 **is-a** 的关系；两个对象之间如果可以用 **is-a** 来表示，就是泛化关系。

简单来说，`父子` 类的关系就是 **is-a** 关系。

![uml-02.jpg](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/uml-02.jpg)

泛化关系用 `空心箭头` + `实线` 连接父子类。箭头方向指向父类。

例如， Mac 和电脑就是泛化关系，通常在程序里面泛化表现为继承于非抽象类。

```
@startuml
class 电脑
class Mac

电脑 <|-- Mac

@enduml
```

### 2. 实现关系（realization）

实现关系在程序中表现为 `接口-实现类` 关系。

实现关系用 `空心箭头` + `虚线` 连接接口和实现类。箭头方向指向接口。

例如，电脑和可计算处理器就是实现关系，通常程序里面实现关系表现为 

![uml-03.jpg](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/uml-03.jpg)

```
@startuml
class 电脑
class Mac

可计算处理器 <|.. 电脑

@enduml
```

### 3. 关联关系（association）

关联关系<small>（association）</small>用来描述一个对象『持有』另一个对象的引用。

关联关系可以细分为 2 种。但是，如果你一时半会分辨不出、决定不了这两个对象之间的关系是具体的哪一种关联关系，你就画成如下的通用形式<small>（虽然不精确，但也不算错）</small>。

![uml-06.jpg](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/uml-06.jpg)

关联关系通常用 `简单箭头` + `实线` 表示，箭头指向被关联方。

::: details 具体关联之一：聚合关系（aggregation）

聚合关系是关联关系的 2 种具体形式之一。聚合关系除了能够描述一个对象『持有』另一个对象的引用之外，它还暗示了它们两者有独立的生命周期。

![uml-04.jpg](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/uml-04.jpg)

聚合关系用一条带 `空心菱形箭头` + `实线` 表示。

如图码农和部门就是聚合关系。与组合关系不同的是，整体和部分不是强依赖的，即使整体不存在了，部分仍然存在。如图为例， 部门撤销了，码农换一个工作还是码农嘛。

:::

::: details 具体关联之二：组合关系（composition）

组合关系是另一种关联关系的具体形式。

组合关系除了能够描述一个对象『持有』另一个对象的引用之外，它还暗示了它们两者有一致的生命周期。

![uml-05.jpg](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/uml-05.jpg)

组合关系用 `实心菱形箭头` + `实线` 表示，与聚合关系一样，组合关系同样表示整体由部分构成的关系，不同之处在于整体和部分是强依赖关系，如果整体不存在了，部分也不复存在。如图为例，如果公司倒闭了，那么何来部门呢？

:::

### 4. 依赖关系（dependency）

![uml-07.jpg](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/uml-07.jpg)

依赖关系是用 `简单箭头` + `虚线` 表示。

他通常描述一个对象在运行期间会用到另一个对象的关系。如图为例码农只有在工作的时候才会用到 Mac 电脑，所以这种依赖关系是依赖于运行状态的。

通常情况下是在程序里面通过形参、局部变量等体现。


### 5. 回顾总结

到这里我们再次回顾一下开篇的图片是不是更加理解里面的连线了？所以我们在绘图过程中一定要非常注意这个线和箭。

![uml-01.jpg](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/uml-01.jpg)

不过话说回来，死记硬背这些东西确实很难，于是我自己想了一个打油诗，帮助自己来记忆，你也可以来试一下。

```
实箭泛化虚实现，虚线依赖实关联。

空菱聚合实组合，项目沟通图常见。
```
