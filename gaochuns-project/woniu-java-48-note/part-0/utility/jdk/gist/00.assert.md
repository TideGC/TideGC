## 断言

概念上「断言」代码就像是一个「拦路虎」，它预期一个 boolean 表达式的值「**应该**」为 true 。

- 如果 boolean 表达式的值为 true ，那么它会「放行」，代码流程继续向下执行；

- 如果 boolean 表达式的值为 false ，那么它会以抛出异常等方式返回，拒绝代码流程继续执行。

从最终效果上来看，断言就是实现了一个逻辑判断的功能。

在 JDK 1.4 开始 Java 也引入了断言特性。

默认情况下，JVM 是关闭断言功能的。即，你在 .java 文件中所编写的代码，在编译过程中，会被删除，不会出现在 .class 文件中。

如果想使用断言调试程序，需要手动打开断言功能。在命令行模式下运行 Java 程序时可增加参数 `-enableassertions` 或者 `-ea` 打开断言。

> [!danger] 警告
> 不要使用断言来替代 if 判断！断言是为了方便调试程序，并不是发布程序的组成部分<small>（这是公论、常识和惯例，不是你开不开 -ea 的问题）</small>。
> 
> assert 语法上是代码，但是功效上更像是一种注释！

断言是通过关键字 **assert** 来定义的，一般的，它有 2 种形式：

1. assert \<布尔表达式>;

    ```java
    boolean b = …; 
    assert b;
    …;
    ```

    当 b 的值为 false 时，assert 就会抛出异常（AssertionError），因此，assert 后面的语句也就不会执行了。

2. assert \<布尔表达式> : \<字符串>;

    ```java
    boolean b = …;  
    assert b: "hello world";
    …;
    ```

    功能同上在，只不过可以指定异常信息。
