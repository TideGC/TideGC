---
alias: 核心概念
---

# 核心概念

AOP 涉及到如下问题：在 **什么类** 的 **什么方法** 的 **什么地方**，做出 **什么样** 的增强。

> [!note] AOP 的功能简而言之就是：
> 在不修改方法源文件的情况下，为源文件的特定部位增加新的代码。

## 切入点表达式

切入点表达式决定了哪些类的哪些方法会被『插入』新代码。它『回答』了：要对『**什么类**』的『**什么方法**』做出增强。

最常用的切入点表达式是 **execution** 表达式，其语法格式如下：

```java
[方法访问修饰符] 方法返回值 包名.类名.方法名(方法的参数)
```

- `方法访问修饰符` 部分是**可选**部分；

- 其它部分是『**必要**』部分。


例如：

```java
execution( * xxx.yyy.zzz.dao.EmployeeDao.*(..) )

execution( public * xxx.yyy.zzz.dao.EmployeeDao.*(..) )

execution( public String xxx.yyy.zzz.dao.EmployeeDao.*(..) )

execution( public String xxx.yyy.zzz.dao.EmployeeDao.*(String, ..) )

execution( * xxx.yyy.zzz.dao.*.*(..) )
```


> [!note] 返回值匹配
> 可以为 `*`，表示任何返回值，全路径的类名等。

> [!tip] 方法名匹配
> 指定方法名。
> 
> 例如：`*` 代表所有方法；`set*`，代表以 `set` 开头的所有方法.

> [!tldr] 参数匹配
>  指定方法参数，包括数量、类型及顺序。
>  例如：`(..)` 代表所有参数；`(*)` 代表一个参数； `(*, String)` 代表第一个参数为任何值，第二个为 **String** 类型。


## 通知类型

通知类型回答了：『**什么位置**』增强『**什么样**』的代码。

| 注解 | 通知 | 说明 |
| :- | :- | :- |
| **@Before** | 在被代理对象的方法前调用 | |
| **@Around** | 将被代理方法封装起来 | 环绕通知，它将覆盖原有方法，但是允许通过反射调用原有方法 |
| **@After** | 在被代理对象方法后调用 | |
| **@AfterReturning** | 在被代理对象正常返回后调用|要求被代理对象的方法执行过程中没有发生异常 |
| **@AfterThrowing** | 在被代理对象的方法抛出异常后调用|要求被代理对象的方法执行过程中发生异常 |

