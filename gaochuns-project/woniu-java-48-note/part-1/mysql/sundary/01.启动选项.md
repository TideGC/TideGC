---
alias:
- 启动选项和系统变量
---

## 启动选项和系统变量

MySQL Sever 启动时需要一些启动项，这些启动项的值决定 / 微调了 MySQL Server 的一些特性。这些启动项可以在命令行中指定，也可以在配置文件中指定。

### 1. 在命令行使用启动项

如果想在启动 MySQL Server 时就激活、关闭、微调某个特性，可以在启动 MySQL Server 的命令行中添加对应的启动项<small>（前提是要有这么个启动项）</small>。例如：

```bash
mysqld --skip-networking
## 或
mysqld --skip_networking
```

命令行中的启动项都是以 `--` 开头。如果是多个单词，则由 `-` 连接，也可以使用 `_` 连接，如上。

在命令行后边指定启动项的通用格式是：

```bash
--启动选项1[=值1] --启动选项2[=值2] … --启动选项n[=值n]
```

一些常用的选项有短形式，但并非所有的选项都有短形式。最常见的短形式启动项有：

| 长形式      | 短形式 | 含义 |
| :-          | :- | :-       |
| --host      | -h | 主机名   |
| --user      | -u | 用户名   |
| --password  | -p | 密码     |
| --port      | -P | 端口     |
| --version   | -V | 版本信息 |

> [!danger] 注意
> 选项名区分大小写，比如，`-p` 和 `-P` 选项拥有完全不同的含义，大家需要注意。

### 2. 配置文件中使用启动项

每次启动 MySQL Server 时都去在命令行中输入一堆选项显得过于繁琐了。MySQL 提出一个配置文件<small>（也叫启动项文件）</small>的概念来简化这个操作。

我们可以把原本要写在命令行中的启动项按规定格式写在这个配置文件中，每次启动 MySQL Server 时，MySQL Server 都会自动从这个配置文件中加载启动项，从而避免我们手动在命令行输入。

> [!cite] 提示
> 推荐使用配置文件的方式来设置启动项。

#### 配置文件的路径

Mysql Server 在启动时会在多个路径下寻找配置文件，这些路径有些是固定的，有些是可在命令行中指定的。

- windows 操作系统下的 MySQL Server 配置文件

-tx-
| # | 路径 | 备注 |
| :-: | :- | :- |
| 1 | %WINDIR%\\my.ini | 支持 2 种不同后缀 |\
|   | %WINDIR%\\my.cnf ||
| 2 | c:\\my.ini | 同上 |\
|   | c:\\my.cnf | | |
| 3 | 安装路径\\my.ini | 同上 |\
|   | 安装路径\\my.cnf | |

- linux 操作系统下的 MySQL Server 配置文件

| # | 路径 | 备注 |
| :-: | :- | :- |
| 1 | /etc/my.cnf  | |
| 2 | /etc/mysql/my.cnf | |
| 3 | $MYSQL_HOME/my.cnf | MYSQL_HOME 是环境变量 |

### 3. 配置文件的内容

配置文件种的启动选项被划分为若干组。每个组有一个组名，用中扩招 <mark style="background: #CACFD9A6;">[]</mark> 括起来，常见的有 3 个：

```text 
[mysqld]
…

[client]
…

[mysql]
…
```

| 配置块      | 说明 |
| :-          | :- |
| `[mysqld]`   | 代表数据库自身的默认设置 |
| `[client]`  | 代表客户端默认设置内容 |
| `[mysql]`   | 代表我们使用 mysql 命令连接、登录 MySQL Server 时的默认设置 |

由于 mysql 命令本身也是 MySQL Server 的客户端之一，因此，当你使用 mysql 命令连接 MySQL Server 时，`[client]` 和 `[mysql]` 配置都会起作用。

比如，常见的 character_set_server 是 `[mysqld]` 下的配置，而 default_character_set 是 `[mysql]` 下的配置：

```text
[mysqld]
character_set_server=utf8

[mysql]
default_character_set=utf8
```
