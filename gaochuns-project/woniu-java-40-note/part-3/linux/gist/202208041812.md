
---
alias: 复制普通文件和目录
tag: linux cp
---

## 复制普通文件和目录

和 mv 移动文件一样，复制命令也可以在一个命令中同时实现复制和重命名两个功能，但是这给初学者带来了学习、理解、使用难度。

学习、练习时要多加注意。

```bash
cp <源> <去处>
```

### 11.1 「源」是文件

这里的 cp 命令根据具体的情况不同展现出是"复制"和"复制并重命名"两种能力。

#### 复制

例如，将当前目录下的 hello.txt 复制到 /tmp 下，仍叫 hello.txt 。<small>这种情况下，/tmp 下原来并没有叫 hello.txt 的文件。</small>

```bash
cp hello.txt /tmp
```

这种情况下，「去处」是一个"目录"的路径名。

#### 复制并重命名

例如，将当前目录下的 hello.txt 复制到 /tmp 下，重命名为 world.txt 。<small>这种情况下，/tmp 下原来可能有 world.txt 也可能没有。</small>

```bash
cp hello.txt /tmp/world.txt
```

这种情况下，「去处」是一个"文件"的路径名。

- 如果文件的路径名已存在，那么 cp 会产生覆盖的效果。<small>覆盖前，它会询问你一下，是否需要覆盖。</small>
- 如果文件的路径名不存在，那么 cp 命令干就完事了。


### 11.2 「源」是目录

要将目录复制到别的地方去，需要使用 cp 命令的 `-r` 选项，使用 `cp -r` 组合。

```bash
cp -r <源目录> <去处>
```

在「源」是目录的情况下，cp -r 命令会有 3 种情况：

- 复制，保持原名；
- 复制，重命名；
- 复制，融合。

由于分类情况较多，所以对新手学习十分不友好，这里有一个万能的 100% 不会错的笨办法：利用通配符 \* ，将复制目录转变为复制多个文件。

使用步骤：

1. 确保「去处」的目录必须存在！有则更好，没有就主动创建<small>（ mkdir 和 mkdir -p ）</small>；
2. 使用 `cp -r <源>/* <去处>` 来代替原本要执行的复制目录操作。含义是：将 xxx 目录下的所有文件<small>（ 包括子目录 ）</small> 复制到「去处」去。

#### 笨办法代替"复制，保持原名"

心里预期的效果是将当前目录下的 hello 目录，复制到 /tmp 下并且仍叫 hello 。<small>此时，/tmp 原本没有 hello 目录。</small>

```bash
# 第一步：将目标目录先"造"出来
mkdir /tmp/hello

# 第二步：复制当前 hello 下的所有文件，到目标 hello 下
cp -r hello/* /tmp/hello
```

逻辑上，这就实现了 "复制目录，并保持原名" 的功效。

#### 笨办法代替"复制，重命名"

心里预期的效果是将当前目录下的 hello 目录，复制到 /tmp 下，并且重命名为 world 。<small>此时，/tmp 原本没有 hello 目录。</small>

```bash
# 第一步：将目标目录先"造"出来
mkdir /tmp/world

# 第二步：复制当前 hello 下的所有文件，到目标 world 下
cp -r hello/* /tmp/world
```

#### 笨办法代替"复制，并融合"

心里预期的效果是将当前目录下的 hello 目录，复制到 /tmp 下去和那边原本就有的一个 world 目录融合。<small>此时，/tmp 下是有 world 目录。</small>

```bash
# 第一步：将目标目录先"造"出来
# 因为 /tmp/world 目录已存在，所以这一步省略。

# 第二步：复制当前 hello 下的所有文件，到目标 world 下
cp -r hello/* /tmp/world
```

