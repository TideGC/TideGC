---
alias: [软撤销]
tag: [git reset]
---

## 软撤销

现在，我们都知道 git add 和 git commit 的组合是将有变动的 "未提交" 的文件的状态变成 "已提交" 并记录具体有哪些变动，从而形成新的"历史版本"。

在上面的描述中，进行了 2 方面的工作：

1. 改变了相关文件状态，从 "未提交" 变成了 "已提交" 。
2. 将相关文件的变动做了存档，形成了一个新的提交记录<small>（ 节点 ）</small>。

软撤销做的事情包括：
- 删除了提交记录；
- 回退了文件的状态；
- 但是，没有删除文件的具体的改动。

因此，在 GitKraken 上的直观视觉效果是："实圈" 退变成了 "虚圈" ，但文件内容没变。

当然，你可以再进一步操作：舍弃文件的这些变动，那么，到这一步，软撤就和硬撤一样了。

![git-reset-GitKraken-5](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/git-reset-GitKraken-5.gif)

注意上面那个撤销后的「虚圈」，硬撤中是没有这个的，硬撤时直接就丢了，而软扯要你手动丢。

另一种效果图：

![git-top-10-07](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/hemiao/git-top-10-07.gif)


---

软撤销的使用场景和价值：

- 软撤销未撤销"撤销"保留了余地。

- 软撤销可以用来实现提交记录的压缩<small>（ 虽然更好的方案是交互式编辑 ）</small>

- "提交 + 软撤销" 可以实现临时提交，以解决未来遇到的 "有虚圈，不切换/不变基" 的情况。
  




