---
alias: RestTemplate 切换底层实现
tags: [RestTemplate, httpclient, okhttp]
---

## RestTemplate 切换底层实现

RestTemplate 底层实现最常用的有以下 3 种：

- **SimpleClientHttpRequestFactory** <small>封装 JDK 的 URLConnection。默认实现</small>

- **HttpComponentsClientHttpRequestFactory** <small>封装第三方类库 HttpClient</small>

- **OkHttp3ClientHttpRequestFactory** <small>封装封装第三方类库 OKHttp</small>

HttpClient 和 OKHttp 执行效率都要比 JDK 的 URLConnection 高不少。OKHttp 的性能最好，而 HttpClient<small>（ 因为出现早 ）</small>使用率更高、更流行。

### 第 1 步：添加必要依赖

引用 apache 基金会的 httpclient ：

```xml
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
</dependency>
```

### 第 2 步：调整 RestTemplate 的 @Bean 配置

所以，在你将 RestTemplate 配置成单例时，你可以指定它使用何种底层库。

```java
@Bean // 换成 HttpClient
public RestTemplate restTemplate() {
	ClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();
	RestTemplate restTemplate = new RestTemplate(factory);
	return restTemplate;
}
```


